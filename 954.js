"use strict";(self.webpackChunkdmf_user=self.webpackChunkdmf_user||[]).push([[954],{6156:(t,n,e)=>{function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}e.d(n,{Z:()=>r})},2122:(t,n,e)=>{function r(){return r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},r.apply(this,arguments)}e.d(n,{Z:()=>r})},6954:(t,n,e)=>{e.r(n);var r={};e.r(r),e.d(r,{loadTodosEpic:()=>ht,saveTodosEpic:()=>vt});var o={};e.r(o),e.d(o,{default:()=>mt});var u={};e.r(u),e.d(u,{loadSnapshot:()=>Ot,saveSnapshot:()=>St});var i=e(2950),c=e.n(i),a=e(2181),l=e.n(a),s=e(8147),f=e(1936),d=e.n(f),p=e(7784),h=e.n(p),v=e(1730),y=e.n(v),b=e(7149),m=e.n(b),g=function(t){return t.todos},O=e(8370),S=(0,O.createAction)("ADD_TODO",(function(t){return{id:Math.ceil(999999*Math.random()).toString(),title:t}}))(),Z=(0,O.createAction)("REMOVE_TODO")(),A=(0,O.createAsyncAction)("LOAD_TODOS_REQUEST","LOAD_TODOS_SUCCESS","LOAD_TODOS_FAILURE")(),w=(0,O.createAsyncAction)("SAVE_TODOS_REQUEST","SAVE_TODOS_SUCCESS","SAVE_TODOS_FAILURE")(),E=e(9476);const R=function(t){var n=t.title,e=t.onRemoveClick;return(0,E.tZ)("div",null,n,(0,E.tZ)("div",{onClick:e},"X"))};var T={removeTodo:Z};const k=(0,s.connect)((function(t){return{isLoading:t.user.todo.isLoadingTodos,todos:g(t.user.todo)}}),T)((function(t){var n=t.isLoading,e=t.todos,r=void 0===e?[]:e,o=t.removeTodo;return n?(0,E.tZ)("p",null,"Loading..."):(0,E.tZ)("ul",null,r.map((function(t){return(0,E.tZ)("li",{key:t.id},(0,E.tZ)(R,{title:t.title,onRemoveClick:function(){return o(t.id)}}))})))}));function P(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,n,e){return n&&_(t.prototype,n),e&&_(t,e),t}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,n){return L=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},L(t,n)}function j(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&L(t,n)}function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function M(t,n){if(n&&("object"===x(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return D(t)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}var I=e(6156);var V={addItem:S},X=function(t){j(o,t);var n,e,r=(n=o,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=U(n);if(e){var o=U(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return M(this,t)});function o(){var t;P(this,o);for(var n=arguments.length,e=new Array(n),u=0;u<n;u++)e[u]=arguments[u];return t=r.call.apply(r,[this].concat(e)),(0,I.Z)(D(t),"state",{title:""}),(0,I.Z)(D(t),"handleTitleChange",(function(n){t.setState({title:n.currentTarget.value})})),(0,I.Z)(D(t),"handleAddClick",(function(){t.props.addItem(t.state.title),t.setState({title:""})})),t}return C(o,[{key:"render",value:function(){var t=this.state.title;return(0,E.tZ)("form",{onSubmit:function(t){t.preventDefault()}},(0,E.tZ)("input",{style:{width:450},type:"text",placeholder:"Enter new item",value:t,onChange:this.handleTitleChange})," ",(0,E.tZ)("button",{type:"submit",onClick:this.handleAddClick,disabled:!t},"Add"))}}]),o}(i.Component);const q=(0,s.connect)(null,V)(X);var B={loadTodos:A.request,saveTodos:w.request},Q=function(t){j(o,t);var n,e,r=(n=o,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=U(n);if(e){var o=U(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return M(this,t)});function o(){return P(this,o),r.apply(this,arguments)}return C(o,[{key:"render",value:function(){console.log(this.props.router);var t=this.props,n=t.loadTodos,e=t.saveTodos,r=this.props.isLoading||!1;return(0,E.tZ)("section",null,(0,E.tZ)("button",{type:"button",onClick:function(){return n(void 0,void 0)},disabled:r},"Load snapshot")," ",(0,E.tZ)("button",{type:"button",onClick:function(){return e(void 0,void 0)},disabled:r},"Save snapshot"))}}]),o}(i.Component);const F=(0,s.connect)((function(t){return{isLoading:t.user.todo.isLoadingTodos,router:t.router}}),B)(Q),H=function(){return(0,E.tZ)("section",null,(0,E.tZ)(F,null),(0,E.tZ)("br",null),(0,E.tZ)(q,null),(0,E.tZ)("hr",null),(0,E.tZ)(k,null))};var Y=function(){return(0,E.tZ)(c().Fragment,null,(0,E.tZ)(d(),{header:(0,E.tZ)(h(),null),footer:(0,E.tZ)(y(),null),className:"u-demo"},(0,E.tZ)("div",null,(0,E.tZ)(m(),null,"Login Page"),(0,E.tZ)(H,null))))},G=e(4603),N=e(3462),$=e(5648),z=G.compose,J=e(7887);function K(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function W(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return K(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?K(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tt=(0,O.createReducer)(!1).handleAction([A.request],(function(t,n){return!0})).handleAction([A.success,A.failure],(function(t,n){return!1})),nt=(0,O.createReducer)([{id:"0",title:"You can add new todos using the form or load saved snapshot..."}]).handleAction(A.success,(function(t,n){return n.payload})).handleAction(S,(function(t,n){return[].concat(W(t),[n.payload])})).handleAction(Z,(function(t,n){return t.filter((function(t){return t.id!==n.payload}))}));const et=(0,G.combineReducers)({isLoadingTodos:tt,todos:nt}),rt=(0,G.combineReducers)({todo:et});(0,G.combineReducers)({router:(0,J.connectRouter)((0,$.lX)()),user:(0,G.combineReducers)({todo:et})});var ot=e(9635),ut=e(7617);function it(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=(0,ut.yG)(t);return(0,ot.D)(t,e)}var ct=e(4975),at=e(7878),lt=e(6798),st=e(2566);function ft(t,n){return(0,lt.e)((function(e,r){var o=null,u=0,i=!1,c=function(){return i&&!o&&r.complete()};e.subscribe(new st.Q(r,(function(e){null==o||o.unsubscribe();var i=0,a=u++;(0,at.Xf)(t(e,a)).subscribe(o=new st.Q(r,(function(t){return r.next(n?n(e,t,a,i++):t)}),(function(){o=null,c()})))}),(function(){i=!0,c()})))}))}var dt=e(9127);function pt(t){return(0,lt.e)((function(n,e){var r,o=null,u=!1;o=n.subscribe(new st.Q(e,void 0,void 0,(function(i){r=(0,at.Xf)(t(i,pt(t)(n))),o?(o.unsubscribe(),o=null,r.subscribe(e)):u=!0}))),u&&(o.unsubscribe(),o=null,r.subscribe(e))}))}var ht=function(t,n,e){var r=e.user;return t.pipe((0,ct.h)((0,O.isActionOf)(A.request)),ft((function(){return(0,ot.D)(r.api.todos.loadSnapshot()).pipe((0,dt.U)(A.success),pt((function(t){return it(A.failure(t))})))})))},vt=function(t,n,e){var r=e.user;return t.pipe((0,ct.h)((0,O.isActionOf)(w.request)),ft((function(){return console.log(n.value,r),r.logger.default.log(n),(0,ot.D)(r.api.todos.saveSnapshot(g(n.value.user.todo))).pipe((0,dt.U)(w.success),pt((function(t){return it(w.failure(t))})))})))};const yt=Object.values(r),bt=N.combineEpics.apply(void 0,W(yt)),mt={log:console.log};var gt=[{id:"0",title:"Yo, your snapshot has been loaded successfully!"}];function Ot(){return new Promise((function(t,n){setTimeout((function(){t(gt)}),500)}))}function St(t){return new Promise((function(n,e){setTimeout((function(){gt=t,n(void 0)}),500)}))}const Zt={user:{logger:o,api:{todos:u}}};var At,wt=(0,N.createEpicMiddleware)({dependencies:Zt}),Et=(0,$.lX)(),Rt=[wt],Tt=z(G.applyMiddleware.apply(void 0,Rt)),kt=(0,G.createStore)((At=Et,(0,G.combineReducers)({router:(0,J.connectRouter)(At),user:rt})),{},Tt);wt.run(bt);const Pt=kt;console.log(Pt),l().render((0,E.tZ)((function(){return(0,E.tZ)(c().Fragment,null,(0,E.tZ)(s.Provider,{store:Pt},(0,E.tZ)(Y,null)))}),null),document.getElementById("root"))},5648:(t,n,e)=>{e.d(n,{aU:()=>r,lX:()=>f,PP:()=>d,cP:()=>s});var r,o=e(2122),u=r||(r={});u.Pop="POP",u.Push="PUSH",u.Replace="REPLACE";function i(t){t.preventDefault(),t.returnValue=""}function c(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter((function(t){return t!==n}))}},call:function(n){t.forEach((function(t){return t&&t(n)}))}}}function a(){return Math.random().toString(36).substr(2,8)}function l(t){var n=t.pathname,e=t.search;return(void 0===n?"/":n)+(void 0===e?"":e)+(void 0===(t=t.hash)?"":t)}function s(t){var n={};if(t){var e=t.indexOf("#");0<=e&&(n.hash=t.substr(e),t=t.substr(0,e)),0<=(e=t.indexOf("?"))&&(n.search=t.substr(e),t=t.substr(0,e)),t&&(n.pathname=t)}return n}function f(t){function n(){var t=p.location,n=h.state||{};return[n.idx,{pathname:t.pathname,search:t.search,hash:t.hash,state:n.usr||null,key:n.key||"default"}]}function e(t){return"string"==typeof t?t:l(t)}function u(t,n){return void 0===n&&(n=null),(0,o.Z)({pathname:m.pathname,hash:"",search:""},"string"==typeof t?s(t):t,{state:n,key:a()})}function f(t){y=t,t=n(),b=t[0],m=t[1],g.call({action:y,location:m})}function d(t){h.go(t)}void 0===t&&(t={});var p=void 0===(t=t.window)?document.defaultView:t,h=p.history,v=null;p.addEventListener("popstate",(function(){if(v)O.call(v),v=null;else{var t=r.Pop,e=n(),o=e[0];if(e=e[1],O.length){if(null!=o){var u=b-o;u&&(v={action:t,location:e,retry:function(){d(-1*u)}},d(u))}}else f(t)}}));var y=r.Pop,b=(t=n())[0],m=t[1],g=c(),O=c();return null==b&&(b=0,h.replaceState((0,o.Z)({},h.state,{idx:b}),"")),{get action(){return y},get location(){return m},createHref:e,push:function t(n,o){var i=r.Push,c=u(n,o);if(!O.length||(O.call({action:i,location:c,retry:function(){t(n,o)}}),0)){var a=[{usr:c.state,key:c.key,idx:b+1},e(c)];c=a[0],a=a[1];try{h.pushState(c,"",a)}catch(t){p.location.assign(a)}f(i)}},replace:function t(n,o){var i=r.Replace,c=u(n,o);O.length&&(O.call({action:i,location:c,retry:function(){t(n,o)}}),1)||(c=[{usr:c.state,key:c.key,idx:b},e(c)],h.replaceState(c[0],"",c[1]),f(i))},go:d,back:function(){d(-1)},forward:function(){d(1)},listen:function(t){return g.push(t)},block:function(t){var n=O.push(t);return 1===O.length&&p.addEventListener("beforeunload",i),function(){n(),O.length||p.removeEventListener("beforeunload",i)}}}}function d(t){function n(t,n){return void 0===n&&(n=null),(0,o.Z)({pathname:v.pathname,search:"",hash:""},"string"==typeof t?s(t):t,{state:n,key:a()})}function e(t,n,e){return!b.length||(b.call({action:t,location:n,retry:e}),!1)}function u(t,n){h=t,v=n,y.call({action:h,location:v})}function i(t){var n=Math.min(Math.max(p+t,0),d.length-1),o=r.Pop,c=d[n];e(o,c,(function(){i(t)}))&&(p=n,u(o,c))}void 0===t&&(t={});var f=t;t=f.initialEntries,f=f.initialIndex;var d=(void 0===t?["/"]:t).map((function(t){return(0,o.Z)({pathname:"/",search:"",hash:"",state:null,key:a()},"string"==typeof t?s(t):t)})),p=Math.min(Math.max(null==f?d.length-1:f,0),d.length-1),h=r.Pop,v=d[p],y=c(),b=c();return{get index(){return p},get action(){return h},get location(){return v},createHref:function(t){return"string"==typeof t?t:l(t)},push:function t(o,i){var c=r.Push,a=n(o,i);e(c,a,(function(){t(o,i)}))&&(p+=1,d.splice(p,d.length,a),u(c,a))},replace:function t(o,i){var c=r.Replace,a=n(o,i);e(c,a,(function(){t(o,i)}))&&(d[p]=a,u(c,a))},go:i,back:function(){i(-1)},forward:function(){i(1)},listen:function(t){return y.push(t)},block:function(t){return b.push(t)}}}}}]);