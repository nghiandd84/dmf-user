"use strict";(self.webpackChunkdmf_user=self.webpackChunkdmf_user||[]).push([[742],{6156:(t,n,e)=>{function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}e.d(n,{Z:()=>r})},2122:(t,n,e)=>{function r(){return r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},r.apply(this,arguments)}e.d(n,{Z:()=>r})},7742:(t,n,e)=>{e.r(n);var r={};e.r(r),e.d(r,{addTodo:()=>Z,loadTodosAsync:()=>w,removeTodo:()=>A,saveTodosAsync:()=>T});var o={};e.r(o),e.d(o,{loadTodosEpic:()=>lt,saveTodosEpic:()=>st});var u={};e.r(u),e.d(u,{default:()=>ht});var i={};e.r(i),e.d(i,{loadSnapshot:()=>yt,saveSnapshot:()=>bt});var c=e(2950),a=e.n(c),l=e(2181),s=e.n(l),f=e(8147),d=e(1936),p=e.n(d),h=e(7784),v=e.n(h),y=e(1730),b=e.n(y),m=e(7149),g=e.n(m),O=function(t){return t.todos},S=e(5737),Z=(0,S.createAction)("ADD_TODO",(function(t){return{id:Math.ceil(999999*Math.random()).toString(),title:t}}))(),A=(0,S.createAction)("REMOVE_TODO")(),w=(0,S.createAsyncAction)("LOAD_TODOS_REQUEST","LOAD_TODOS_SUCCESS","LOAD_TODOS_FAILURE")(),T=(0,S.createAsyncAction)("SAVE_TODOS_REQUEST","SAVE_TODOS_SUCCESS","SAVE_TODOS_FAILURE")(),E=e(9476);const R=function(t){var n=t.title,e=t.onRemoveClick;return(0,E.tZ)("div",null,n,(0,E.tZ)("div",{onClick:e},"X"))};var k={removeTodo:A};const P=(0,f.connect)((function(t){return{isLoading:t.user.todo.isLoadingTodos,todos:O(t.user.todo)}}),k)((function(t){var n=t.isLoading,e=t.todos,r=void 0===e?[]:e,o=t.removeTodo;return n?(0,E.tZ)("p",null,"Loading..."):(0,E.tZ)("ul",null,r.map((function(t){return(0,E.tZ)("li",{key:t.id},(0,E.tZ)(R,{title:t.title,onRemoveClick:function(){return o(t.id)}}))})))}));function _(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function C(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,n,e){return n&&C(t.prototype,n),e&&C(t,e),t}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t,n){return j=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},j(t,n)}function x(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&j(t,n)}function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function U(t,n){if(n&&("object"===M(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return D(t)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}var V=e(6156);var X={addItem:Z},q=function(t){x(o,t);var n,e,r=(n=o,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=I(n);if(e){var o=I(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return U(this,t)});function o(){var t;_(this,o);for(var n=arguments.length,e=new Array(n),u=0;u<n;u++)e[u]=arguments[u];return t=r.call.apply(r,[this].concat(e)),(0,V.Z)(D(t),"state",{title:""}),(0,V.Z)(D(t),"handleTitleChange",(function(n){t.setState({title:n.currentTarget.value})})),(0,V.Z)(D(t),"handleAddClick",(function(){t.props.addItem(t.state.title),t.setState({title:""})})),t}return L(o,[{key:"render",value:function(){var t=this.state.title;return(0,E.tZ)("form",{onSubmit:function(t){t.preventDefault()}},(0,E.tZ)("input",{style:{width:450},type:"text",placeholder:"Enter new item",value:t,onChange:this.handleTitleChange})," ",(0,E.tZ)("button",{type:"submit",onClick:this.handleAddClick,disabled:!t},"Add"))}}]),o}(c.Component);const B=(0,f.connect)(null,X)(q);var Q={loadTodos:w.request,saveTodos:T.request},F=function(t){x(o,t);var n,e,r=(n=o,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=I(n);if(e){var o=I(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return U(this,t)});function o(){return _(this,o),r.apply(this,arguments)}return L(o,[{key:"render",value:function(){console.log(this.props.router);var t=this.props,n=t.loadTodos,e=t.saveTodos,r=this.props.isLoading||!1;return(0,E.tZ)("section",null,(0,E.tZ)("button",{type:"button",onClick:function(){return n(void 0,void 0)},disabled:r},"Load snapshot")," ",(0,E.tZ)("button",{type:"button",onClick:function(){return e(void 0,void 0)},disabled:r},"Save snapshot"))}}]),o}(c.Component);const H=(0,f.connect)((function(t){return{isLoading:t.user.todo.isLoadingTodos,router:t.router}}),Q)(F),K=function(){return(0,E.tZ)("section",null,(0,E.tZ)(H,null),(0,E.tZ)("br",null),(0,E.tZ)(B,null),(0,E.tZ)("hr",null),(0,E.tZ)(P,null))};var Y=function(){return(0,E.tZ)(a().Fragment,null,(0,E.tZ)(p(),{header:(0,E.tZ)(v(),null),footer:(0,E.tZ)(b(),null),className:"u-demo"},(0,E.tZ)("div",null,(0,E.tZ)(g(),null,"Login Page"),(0,E.tZ)(K,null))))},N=e(8188),$=e(1586),z=e(5648),G=N.compose,J=e(1599);function W(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function tt(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return W(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?W(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nt=(0,S.createReducer)(!1).handleAction([w.request],(function(t,n){return!0})).handleAction([w.success,w.failure],(function(t,n){return!1})),et=(0,S.createReducer)([{id:"0",title:"You can add new todos using the form or load saved snapshot..."}]).handleAction(w.success,(function(t,n){return n.payload})).handleAction(Z,(function(t,n){return[].concat(tt(t),[n.payload])})).handleAction(A,(function(t,n){return t.filter((function(t){return t.id!==n.payload}))}));const rt=(0,N.combineReducers)({isLoadingTodos:nt,todos:et});J.routerActions;var ot=e(326),ut=e(4975),it=e(4978),ct=e(9127),at=e(9878),lt=function(t,n,e){var r=e.user;return t.pipe((0,ut.h)((0,S.isActionOf)(w.request)),(0,it.w)((function(){return(0,ot.from)(r.api.todos.loadSnapshot()).pipe((0,ct.U)(w.success),(0,at.K)((function(t){return(0,ot.of)(w.failure(t))})))})))},st=function(t,n,e){var r=e.user;return t.pipe((0,ut.h)((0,S.isActionOf)(T.request)),(0,it.w)((function(){return console.log(n.value,r),r.logger.default.log(n),(0,ot.from)(r.api.todos.saveSnapshot(O(n.value.user.todo))).pipe((0,ct.U)(T.success),(0,at.K)((function(t){return(0,ot.of)(T.failure(t))})))})))},ft=Object.values(o),dt=(0,N.combineReducers)({todo:rt});(0,N.combineReducers)({router:(0,J.connectRouter)((0,z.lX)()),user:(0,N.combineReducers)({todo:rt})});const pt=$.combineEpics.apply(void 0,tt(ft)),ht={log:console.log};var vt=[{id:"0",title:"Yo, your snapshot has been loaded successfully!"}];function yt(){return new Promise((function(t,n){setTimeout((function(){t(vt)}),500)}))}function bt(t){return new Promise((function(n,e){setTimeout((function(){vt=t,n(void 0)}),500)}))}const mt={user:{logger:u,api:{todos:i}}};var gt,Ot=(0,$.createEpicMiddleware)({dependencies:mt}),St=(0,z.lX)(),Zt=[Ot],At=G(N.applyMiddleware.apply(void 0,Zt)),wt=(0,N.createStore)((gt=St,(0,N.combineReducers)({router:(0,J.connectRouter)(gt),user:dt})),{},At);Ot.run(pt);const Tt=wt;console.log(Tt),s().render((0,E.tZ)((function(){return(0,E.tZ)(a().Fragment,null,(0,E.tZ)(f.Provider,{store:Tt},(0,E.tZ)(Y,null)))}),null),document.getElementById("root"))},5648:(t,n,e)=>{e.d(n,{aU:()=>r,lX:()=>f,PP:()=>d,cP:()=>s});var r,o=e(2122),u=r||(r={});u.Pop="POP",u.Push="PUSH",u.Replace="REPLACE";function i(t){t.preventDefault(),t.returnValue=""}function c(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter((function(t){return t!==n}))}},call:function(n){t.forEach((function(t){return t&&t(n)}))}}}function a(){return Math.random().toString(36).substr(2,8)}function l(t){var n=t.pathname,e=t.search;return(void 0===n?"/":n)+(void 0===e?"":e)+(void 0===(t=t.hash)?"":t)}function s(t){var n={};if(t){var e=t.indexOf("#");0<=e&&(n.hash=t.substr(e),t=t.substr(0,e)),0<=(e=t.indexOf("?"))&&(n.search=t.substr(e),t=t.substr(0,e)),t&&(n.pathname=t)}return n}function f(t){function n(){var t=p.location,n=h.state||{};return[n.idx,{pathname:t.pathname,search:t.search,hash:t.hash,state:n.usr||null,key:n.key||"default"}]}function e(t){return"string"==typeof t?t:l(t)}function u(t,n){return void 0===n&&(n=null),(0,o.Z)({pathname:m.pathname,hash:"",search:""},"string"==typeof t?s(t):t,{state:n,key:a()})}function f(t){y=t,t=n(),b=t[0],m=t[1],g.call({action:y,location:m})}function d(t){h.go(t)}void 0===t&&(t={});var p=void 0===(t=t.window)?document.defaultView:t,h=p.history,v=null;p.addEventListener("popstate",(function(){if(v)O.call(v),v=null;else{var t=r.Pop,e=n(),o=e[0];if(e=e[1],O.length){if(null!=o){var u=b-o;u&&(v={action:t,location:e,retry:function(){d(-1*u)}},d(u))}}else f(t)}}));var y=r.Pop,b=(t=n())[0],m=t[1],g=c(),O=c();return null==b&&(b=0,h.replaceState((0,o.Z)({},h.state,{idx:b}),"")),{get action(){return y},get location(){return m},createHref:e,push:function t(n,o){var i=r.Push,c=u(n,o);if(!O.length||(O.call({action:i,location:c,retry:function(){t(n,o)}}),0)){var a=[{usr:c.state,key:c.key,idx:b+1},e(c)];c=a[0],a=a[1];try{h.pushState(c,"",a)}catch(t){p.location.assign(a)}f(i)}},replace:function t(n,o){var i=r.Replace,c=u(n,o);O.length&&(O.call({action:i,location:c,retry:function(){t(n,o)}}),1)||(c=[{usr:c.state,key:c.key,idx:b},e(c)],h.replaceState(c[0],"",c[1]),f(i))},go:d,back:function(){d(-1)},forward:function(){d(1)},listen:function(t){return g.push(t)},block:function(t){var n=O.push(t);return 1===O.length&&p.addEventListener("beforeunload",i),function(){n(),O.length||p.removeEventListener("beforeunload",i)}}}}function d(t){function n(t,n){return void 0===n&&(n=null),(0,o.Z)({pathname:v.pathname,search:"",hash:""},"string"==typeof t?s(t):t,{state:n,key:a()})}function e(t,n,e){return!b.length||(b.call({action:t,location:n,retry:e}),!1)}function u(t,n){h=t,v=n,y.call({action:h,location:v})}function i(t){var n=Math.min(Math.max(p+t,0),d.length-1),o=r.Pop,c=d[n];e(o,c,(function(){i(t)}))&&(p=n,u(o,c))}void 0===t&&(t={});var f=t;t=f.initialEntries,f=f.initialIndex;var d=(void 0===t?["/"]:t).map((function(t){return(0,o.Z)({pathname:"/",search:"",hash:"",state:null,key:a()},"string"==typeof t?s(t):t)})),p=Math.min(Math.max(null==f?d.length-1:f,0),d.length-1),h=r.Pop,v=d[p],y=c(),b=c();return{get index(){return p},get action(){return h},get location(){return v},createHref:function(t){return"string"==typeof t?t:l(t)},push:function t(o,i){var c=r.Push,a=n(o,i);e(c,a,(function(){t(o,i)}))&&(p+=1,d.splice(p,d.length,a),u(c,a))},replace:function t(o,i){var c=r.Replace,a=n(o,i);e(c,a,(function(){t(o,i)}))&&(d[p]=a,u(c,a))},go:i,back:function(){i(-1)},forward:function(){i(1)},listen:function(t){return y.push(t)},block:function(t){return b.push(t)}}}},9878:(t,n,e)=>{e.d(n,{K:()=>i});var r=e(7878),o=e(2566),u=e(6798);function i(t){return(0,u.e)((function(n,e){var u,c=null,a=!1;c=n.subscribe(new o.Q(e,void 0,void 0,(function(o){u=(0,r.Xf)(t(o,i(t)(n))),c?(c.unsubscribe(),c=null,u.subscribe(e)):a=!0}))),a&&(c.unsubscribe(),c=null,u.subscribe(e))}))}},4978:(t,n,e)=>{e.d(n,{w:()=>i});var r=e(7878),o=e(6798),u=e(2566);function i(t,n){return(0,o.e)((function(e,o){var i=null,c=0,a=!1,l=function(){return a&&!i&&o.complete()};e.subscribe(new u.Q(o,(function(e){null==i||i.unsubscribe();var a=0,s=c++;(0,r.Xf)(t(e,s)).subscribe(i=new u.Q(o,(function(t){return o.next(n?n(e,t,s,a++):t)}),(function(){i=null,l()})))}),(function(){a=!0,l()})))}))}}}]);